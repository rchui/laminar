

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>Deployment - laminar  documentation</title>
      
    
    
      <link rel="stylesheet" href="../_static/stylesheets/main.95d89437.min.css">
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/google_fonts.css" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#containers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="laminar  documentation" class="md-header__button md-logo" aria-label="laminar  documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            laminar  documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deployment
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="laminar  documentation" class="md-nav__button md-logo" aria-label="laminar  documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    laminar  documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_1">
          <span class="md-ellipsis">Getting Started</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Getting Started</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        <span class="md-ellipsis">Introduction</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        <span class="md-ellipsis">Installation</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="basics.html" class="md-nav__link">
        <span class="md-ellipsis">Basics</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Deployment</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Deployment</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#containers" class="md-nav__link">
    <span title="containers (reference label)" class="md-ellipsis">Containers</span>
  </a>
  
    <nav class="md-nav" aria-label="Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-images" class="md-nav__link">
    <span title="building images (reference label)" class="md-ellipsis">Building Images</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-requirements" class="md-nav__link">
    <span title="adding requirements (reference label)" class="md-ellipsis">Adding Requirements</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hosting-images" class="md-nav__link">
    <span title="hosting images (reference label)" class="md-ellipsis">Hosting Images</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running" class="md-nav__link">
    <span title="running (reference label)" class="md-ellipsis">Running</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processes" class="md-nav__link">
    <span title="processes (reference label)" class="md-ellipsis">Processes</span>
  </a>
  
    <nav class="md-nav" aria-label="Processes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schedulers" class="md-nav__link">
    <span title="schedulers (reference label)" class="md-ellipsis">Schedulers</span>
  </a>
  
    <nav class="md-nav" aria-label="Schedulers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#virtualenv" class="md-nav__link">
    <span title="virtualenv (reference label)" class="md-ellipsis">Virtual<wbr>Env</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    <span class="md-ellipsis">Container</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executors" class="md-nav__link">
    <span title="executors (reference label)" class="md-ellipsis">Executors</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2">
          <span class="md-ellipsis">Layers</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Layers" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Layers</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../layers/scaling_up.html" class="md-nav__link">
        <span class="md-ellipsis">Scaling Up</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../layers/scaling_out.html" class="md-nav__link">
        <span class="md-ellipsis">Scaling Out</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../layers/branching.html" class="md-nav__link">
        <span class="md-ellipsis">Branching</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../layers/configuration.html" class="md-nav__link">
        <span class="md-ellipsis">Configuration</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3">
          <span class="md-ellipsis">Flows</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Flows" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Flows</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../flows/parameters.html" class="md-nav__link">
        <span class="md-ellipsis">Parameters</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../flows/datastores.html" class="md-nav__link">
        <span class="md-ellipsis">Datastores</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../flows/executors.html" class="md-nav__link">
        <span class="md-ellipsis">Executors</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../flows/schedulers.html" class="md-nav__link">
        <span class="md-ellipsis">Schedulers</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../flows/results.html" class="md-nav__link">
        <span class="md-ellipsis">Results</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4">
          <span class="md-ellipsis">Advanced</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Advanced</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/recovery.html" class="md-nav__link">
        <span class="md-ellipsis">Recovery</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/composition.html" class="md-nav__link">
        <span class="md-ellipsis">Composition</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/hooks.html" class="md-nav__link">
        <span class="md-ellipsis">Hooks</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/serde.html" class="md-nav__link">
        <span class="md-ellipsis">Ser<wbr>(De)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/testing.html" class="md-nav__link">
        <span class="md-ellipsis">Testing</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5">
          <span class="md-ellipsis">Technical Details</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Technical Details" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Technical Details</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/datastores.html" class="md-nav__link">
        <span class="md-ellipsis">Datastores</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/executions.html" class="md-nav__link">
        <span class="md-ellipsis">Executions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/laminar.html" class="md-nav__link">
        <span class="md-ellipsis">laminar</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#containers" class="md-nav__link">
    <span title="containers (reference label)" class="md-ellipsis">Containers</span>
  </a>
  
    <nav class="md-nav" aria-label="Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-images" class="md-nav__link">
    <span title="building images (reference label)" class="md-ellipsis">Building Images</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-requirements" class="md-nav__link">
    <span title="adding requirements (reference label)" class="md-ellipsis">Adding Requirements</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hosting-images" class="md-nav__link">
    <span title="hosting images (reference label)" class="md-ellipsis">Hosting Images</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running" class="md-nav__link">
    <span title="running (reference label)" class="md-ellipsis">Running</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processes" class="md-nav__link">
    <span title="processes (reference label)" class="md-ellipsis">Processes</span>
  </a>
  
    <nav class="md-nav" aria-label="Processes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schedulers" class="md-nav__link">
    <span title="schedulers (reference label)" class="md-ellipsis">Schedulers</span>
  </a>
  
    <nav class="md-nav" aria-label="Schedulers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#virtualenv" class="md-nav__link">
    <span title="virtualenv (reference label)" class="md-ellipsis">Virtual<wbr>Env</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    <span class="md-ellipsis">Container</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executors" class="md-nav__link">
    <span title="executors (reference label)" class="md-ellipsis">Executors</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="deployment">Deployment<a class="headerlink" href="#deployment" title="Permalink to this heading">¶</a></h1>
<p>To <strong>deploy</strong> an application means to make it available to users. Deploying a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> allows users to run it, perform the defined work, and inspect any generated results.</p>
<h2 id="containers">Containers<a class="headerlink" href="#containers" title="Permalink to this heading">¶</a></h2>
<p>The only supported method of deployment exists with containers. Containers are a form of operating system virtualization in which software is packaged into standard units that can be deployed anywhere.</p>
<p>Unlike virtual machines, containers don’t contain the entire operating system. Instead they share the underlying host operating system and use virtualization later in between the containers and the host like Docker.</p>
<p>Docker is not the only method for building, running, and deploy containers, but it will be used throughout for simplicity and consistency.</p>
<p><a class="reference external" href="https://www.docker.com/resources/what-container">For more information on containers.</a></p>
<h3 id="building-images">Building Images<a class="headerlink" href="#building-images" title="Permalink to this heading">¶</a></h3>
<p>Images are the built units and become containers at runtime. Images are built to a specification like a Dockerfile. A minimal Dockerfile might look like:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><code><span class="c"># Dockerfile</span>

<span class="k">FROM</span><span class="w"> </span><span class="s">rchui/laminar</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/laminar</span>

<span class="k">COPY</span><span class="w"> </span>. ./
</code></pre></div>
</div>
<p>And can be built with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">docker</span> <span class="n">build</span> <span class="o">-</span><span class="n">t</span> <span class="n">my</span><span class="o">/</span><span class="n">laminar</span><span class="o">/</span><span class="n">image</span> <span class="o">.</span>
</code></pre></div>
</div>
<h3 id="adding-requirements">Adding Requirements<a class="headerlink" href="#adding-requirements" title="Permalink to this heading">¶</a></h3>
<p>Your image must contain all of the dependencies necessary to run your flow. Imagine you needed <code class="docutils literal notranslate"><span class="pre">pandas</span></code> in your image, you may have a requirements file like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># requirements.txt</span>

<span class="n">laminar</span>
<span class="n">numpy</span>
<span class="n">pandas</span>
</code></pre></div>
</div>
<p>This requirements file can be integrated into your Dockerfile so that your requirements are installed when the image is built.</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><code><span class="c"># Dockerfile</span>

<span class="k">FROM</span><span class="w"> </span><span class="s">rchui/laminar</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/laminar</span>

<span class="k">COPY</span><span class="w"> </span>. ./
<span class="k">RUN</span><span class="w"> </span>pip install --requirement requirements.txt
</code></pre></div>
</div>
<p>There are many great articles about how to create small, efficient Python images: https://snyk.io/blog/best-practices-containerizing-python-docker/</p>
<h3 id="hosting-images">Hosting Images<a class="headerlink" href="#hosting-images" title="Permalink to this heading">¶</a></h3>
<p>Images can be pushed to and distributed by a container registry. There are several that exist including DockerHub, AWS ECR Public Registry, Google Cloud Container Registry, and Quay.</p>
<p>Your built images can be easily pushed to a container registry with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">docker</span> <span class="n">push</span> <span class="o">-</span><span class="n">t</span> <span class="n">my</span><span class="o">/</span><span class="n">laminar</span><span class="o">/</span><span class="n">image</span>
</code></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Docker has an extensive <a class="reference external" href="https://docs.docker.com/get-started/">getting started guide</a> for a more in-depth dive into containers.</p>
</div>
<h3 id="running">Running<a class="headerlink" href="#running" title="Permalink to this heading">¶</a></h3>
<p>Containers run as long as the main processes continues to run. They typically contain one process but it is possible to start multiple subprocesses from the main one. When the main process stops, the container stops and exits as well.</p>
<p>The main process of a container is driven by the command given to start it. We can make the previously built image print out <code class="docutils literal notranslate"><span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></code> before exiting.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">docker</span> <span class="n">run</span> <span class="n">my</span><span class="o">/</span><span class="n">laminar</span><span class="o">/</span><span class="n">image</span> <span class="n">echo</span> <span class="s2">&quot;hello world&quot;</span>
</code></pre></div>
</div>
<h2 id="processes">Processes<a class="headerlink" href="#processes" title="Permalink to this heading">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">laminar</span></code> deployment consists of starting a scheduler process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It may be helpful to read <a class="reference internal" href="../technical/executions.html"><span class="doc std std-doc">Technical Details: Execution</span></a> to get a better understanding of how the processes interact.</p>
</div>
<h3 id="schedulers">Schedulers<a class="headerlink" href="#schedulers" title="Permalink to this heading">¶</a></h3>
<p>The scheduler starts executor processes and tracks their completion. The scheduler is a long running process that runs for the lifetime of a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> execution. Scheduler processes should be run on reliable infrastructure that has high availability guarantees as the scheduler process will not recover on failure.</p>
<p>Consider the following simple flow:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># main.py</span>

<span class="kn">from</span> <span class="nn">laminar</span> <span class="kn">import</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">Layer</span>

<span class="k">class</span> <span class="nc">HelloFlow</span><span class="p">(</span><span class="n">Flow</span><span class="p">):</span> <span class="o">...</span>

<span class="nd">@HelloFlow</span><span class="o">.</span><span class="n">register</span>
<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Layer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="nd">@HelloFlow</span><span class="o">.</span><span class="n">register</span>
<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Layer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">A</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">if</span> <span class="n">flow</span> <span class="o">:=</span> <span class="n">HelloFlow</span><span class="p">():</span>
    <span class="n">flow</span><span class="p">()</span>
</code></pre></div>
</div>
<p>The scheduler process can be started locally or inside a container. The scheduler process must reach any invocation of <code class="docutils literal notranslate"><span class="pre">flow()</span></code>. From here the scheduler process will start to schedule layers for execution.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The processes must reach <strong>any invocation</strong> of <code class="docutils literal notranslate"><span class="pre">flow()</span></code> but do not necessarily need to reach the same one.</p>
</div>
<h4 id="virtualenv">VirtualEnv<a class="headerlink" href="#virtualenv" title="Permalink to this heading">¶</a></h4>
<p>Virtual environments are isolated python environments. They a useful tool for local development and also serve as a useful demonstration of how to start scheduler processes. <a class="reference external" href="https://virtualenv.pypa.io/en/latest/">For more information on virtualenvs.</a></p>
<p>Install the <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> python package</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenv</span>
</code></pre></div>
</div>
<p>Create a virtualenv</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">virtualenv</span> <span class="o">.</span><span class="n">venv</span>
</code></pre></div>
</div>
<p>Activate the virtualenv</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="o">.</span> <span class="o">.</span><span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</code></pre></div>
</div>
<p>Install additional python packages</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">...</span>
</code></pre></div>
</div>
<p>Start the scheduler process</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">python</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span>
</code></pre></div>
</div>
<h4 id="container">Container<a class="headerlink" href="#container" title="Permalink to this heading">¶</a></h4>
<p>Although scheduler processes can be started outside of a container, we recommend that users also run the scheduler in one. Using the previously built image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">docker</span> <span class="n">run</span> <span class="n">my</span><span class="o">/</span><span class="n">laminar</span><span class="o">/</span><span class="n">image</span> <span class="n">python</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span>
</code></pre></div>
</div>
<p>This command will starts a <code class="docutils literal notranslate"><span class="pre">my/laminar/image</span></code> Docker container and executes <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">main.py</span></code> within it. Because the container contains all python package dependencies bundled within it, there is no need to install packages before invocation.</p>
<h3 id="executors">Executors<a class="headerlink" href="#executors" title="Permalink to this heading">¶</a></h3>
<p>The executor evaluates a single <code class="docutils literal notranslate"><span class="pre">Layer</span></code> and writes its results to a Datastore. Executors processes are always run inside a Docker container and run ephemerally for the lifetime of a <code class="docutils literal notranslate"><span class="pre">Layer</span></code> evaluation. Because of this, executor processses can be run on infrastructure with low availability guarantees.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>With the <span class="xref myst">Retry</span> layer configuration, executors can be restarted upon failure.</p>
</div>
<p>Like the scheduler, executor processes must also reach any invocation of <code class="docutils literal notranslate"><span class="pre">flow()</span></code>. From here, the logic will intelligently diverge; executor processes will instead evaluate a single layer based on parameters passed to it by the scheduler.</p>
<p>Internally to start executor containers, the scheduler will (with additional parameters) invoke roughly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">docker</span> <span class="n">run</span> <span class="n">my</span><span class="o">/</span><span class="n">laminar</span><span class="o">/</span><span class="n">image</span> <span class="n">python</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span>
</code></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In order to change this behavior, each layer’s container can be configured individually via the <span class="xref myst">Container</span> layer configuration.</p>
</div>






                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="basics.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Basics" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Basics
            </div>
          </div>
        </a>
      
      
        
        <a href="../layers/scaling_up.html" class="md-footer__link md-footer__link--next" aria-label="Next: Scaling Up" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Scaling Up
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2021, Ryan Chui.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    5.3.0.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../_static/javascripts/bundle.309d5c42.min.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    
  </body>
</html>